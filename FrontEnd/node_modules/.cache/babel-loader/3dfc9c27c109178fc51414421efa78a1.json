{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as echarts from 'echarts';\nimport { getExamineHistory } from '@/request/testApi';\nimport { getTime } from '@/utils/utils';\nexport default {\n  mounted() {\n    getExamineHistory({\n      email: this.$store.state.email\n    }).then(res => {\n      this.historyData = res.data.slice(0, this.itemNumber).reverse();\n      const n = this.historyData.length;\n      if (n === 0) return;\n      this.curData = {\n        date: getTime(this.historyData[n - 1].timeStamp),\n        result: (Number(this.historyData[n - 1].result) * 100).toFixed(1) + ' %',\n        BMI: this.historyData[n - 1].BMI,\n        weightGain: this.historyData[n - 1].weightGain,\n        cycle: this.historyData[n - 1].menstrualCycle\n      };\n      this.getCharts();\n    });\n  },\n  data() {\n    return {\n      historyData: [],\n      itemNumber: 7,\n      curData: {\n        date: '',\n        result: '',\n        BMI: '',\n        weightGain: '',\n        cycle: ''\n      }\n    };\n  },\n  computed: {\n    chartData() {\n      const data = [];\n      this.historyData.forEach(d => {\n        data.push(Number((100 * Number(d.result)).toFixed(1)));\n      });\n      return data;\n    },\n    chartDateData() {\n      const data = [];\n      this.historyData.forEach(d => {\n        data.push(getTime(d.timeStamp));\n      });\n      return data;\n    }\n  },\n  methods: {\n    getCharts() {\n      const chart = this.$refs.chart;\n      const myChart = echarts.init(chart);\n      myChart.setOption({\n        width: 'auto',\n        xAxis: {\n          type: 'category',\n          data: this.chartDateData\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: [{\n          data: this.chartData,\n          type: 'bar',\n          showBackground: true,\n          backgroundStyle: {\n            color: 'rgba(180, 180, 180, 0.2)'\n          }\n        }],\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'shadow'\n          },\n          formatter: function (params) {\n            let data = params[0];\n            return data.axisValue + '<br/>' + data.data;\n          }\n        }\n      });\n      myChart.on('click', event => {\n        console.log(event);\n      });\n      myChart.on('mouseover', event => {\n        const index = event.dataIndex;\n        this.curData = {\n          date: getTime(this.historyData[index].timeStamp),\n          result: (Number(this.historyData[index].result) * 100).toFixed(1) + ' %',\n          BMI: this.historyData[index].BMI,\n          weightGain: this.historyData[index].weightGain,\n          cycle: this.historyData[index].menstrualCycle\n        };\n      });\n    }\n  },\n  components: {}\n};","map":{"version":3,"mappings":";AA2CA;AACA;AACA;AACA;EACAA;IACAC;MACAC;IACA,GACAC;MACA;MACA;MACA;MACA;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;QACAR;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAK;IACAC;MACA;MACA;QACAL;MACA;MACA;IACA;IACAM;MACA;MACA;QACAN;MACA;MACA;IACA;EACA;EACAO;IACAC;MACA;MACA;MACAC;QACAC;QACAC;UACAC;UACAZ;QACA;QACAa;UACAD;QACA;QACAE,SACA;UACAd;UACAY;UACAG;UACAC;YACAC;UACA;QACA,EACA;QACAC;UACAC;UACAC;YACAR;UACA;UACAS;YACA;YACA;UACA;QACA;MACA;MACAZ;QACAa;MACA;MACAb;QACA;QACA;UACAd;UACAC;UACAC;UACAC;UACAC;QACA;MACA;IAEA;EACA;EACAwB,aACA;AACA","names":["mounted","getExamineHistory","email","then","date","result","BMI","weightGain","cycle","data","historyData","itemNumber","curData","computed","chartData","chartDateData","methods","getCharts","myChart","width","xAxis","type","yAxis","series","showBackground","backgroundStyle","color","tooltip","trigger","axisPointer","formatter","console","components"],"sourceRoot":"src/view/history","sources":["HistoryBoard.vue"],"sourcesContent":["<template>\n  <el-row class='history-container'>\n\t\t\t<el-col :span='15' class='chart-container'>\n\t\t\t\t<div class='info-title'>History</div>\n\t\t\t\t<el-empty v-if=\"!this.hasRecord\" description=\" \"></el-empty>\n\t\t\t\t<div v-else ref='chart' style='width: 100%; height: 80%;'></div>\n\t\t\t</el-col>\n\t\t\t<el-col :span='9' class='info-container'>\n\t\t\t\t<div class='info-title'>Info Board</div>\n\t\t\t\t<el-card class='info-board'>\n\t\t\t\t\t<div class='info-item'>\n\t\t\t\t\t\t<div class='info-key'>Date:</div> \n\t\t\t\t\t\t<div class='info-value'>{{curData.date}}</div>\n\t\t\t\t\t\t<div class='summary-divider'></div>\n\t\t\t\t\t</div> \n\t\t\t\t\t<div class='info-item'>\n\t\t\t\t\t\t<div class='info-key'>Result:</div> \n\t\t\t\t\t\t<div class='info-value'>{{curData.result}}</div>\n\t\t\t\t\t\t<div class='summary-divider'></div>\n\t\t\t\t\t</div> \n\t\t\t\t\t<div class='info-item'>\n\t\t\t\t\t\t<div class='info-key'>BMI:</div> \n\t\t\t\t\t\t<div class='info-value'>{{curData.BMI}}</div>\n\t\t\t\t\t\t<div class='summary-divider'></div>\n\t\t\t\t\t</div> \n\t\t\t\t\t<div class='info-item'>\n\t\t\t\t\t\t<div class='info-key'>Weight Gain:</div> \n\t\t\t\t\t\t<div class='info-value'>{{curData.weightGain}}</div>\n\t\t\t\t\t\t<div class='summary-divider'></div>\n\t\t\t\t\t</div> \n\t\t\t\t\t<div class='info-item'>\n\t\t\t\t\t\t<div class='info-key'>Cycle:</div> \n\t\t\t\t\t\t<div class='info-value'>{{curData.cycle}}</div>\n\t\t\t\t\t\t<el-divider></el-divider>\n\t\t\t\t\t</div> \n\t\t\t\t\t\n\n\t\t\t\t</el-card>\n\t\t\t</el-col>\n\t</el-row>\n</template>\n\n<script>\nimport * as echarts from 'echarts';\nimport { getExamineHistory } from '@/request/testApi';\nimport { getTime } from '@/utils/utils'\nexport default {\n\tmounted(){\n\t\tgetExamineHistory({\n\t\t\temail: this.$store.state.email\n\t\t})\n\t\t.then(res => {\n\t\t\tthis.historyData = res.data.slice(0, this.itemNumber).reverse()\n\t\t\tconst n = this.historyData.length\n\t\t\tif (n === 0) return\n\t\t\tthis.curData = {\n\t\t\t\tdate: getTime(this.historyData[n - 1].timeStamp),\n\t\t\t\tresult: (Number(this.historyData[n - 1].result) * 100).toFixed(1) + ' %',\n\t\t\t\tBMI: this.historyData[n - 1].BMI,\n\t\t\t\tweightGain: this.historyData[n - 1].weightGain,\n\t\t\t\tcycle: this.historyData[n - 1].menstrualCycle,\n\t\t\t}\n\t\t\tthis.getCharts()\n\t\t})\n\t},\n\tdata() {\n\t\treturn {\n\t\t\thistoryData: [],\n\t\t\titemNumber: 7,\n\t\t\tcurData: {\n\t\t\t\tdate: '',\n\t\t\t\tresult: '',\n\t\t\t\tBMI: '',\n\t\t\t\tweightGain: '',\n\t\t\t\tcycle: '',\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tchartData() {\n\t\t\tconst data = []\n\t\t\tthis.historyData.forEach(d => {\n\t\t\t\tdata.push(Number((100 * Number(d.result)).toFixed(1)))\n\t\t\t})\n\t\t\treturn data\n\t\t},\n\t\tchartDateData() {\n\t\t\tconst data = []\n\t\t\tthis.historyData.forEach(d => {\n\t\t\t\tdata.push(getTime(d.timeStamp))\n\t\t\t})\n\t\t\treturn data\n\t\t}\n\t},\n\tmethods: {\n\t\tgetCharts() {\n\t\t\tconst chart = this.$refs.chart\n\t\t\tconst myChart = echarts.init(chart)\n\t\t\tmyChart.setOption({\n\t\t\t\twidth: 'auto',\n        xAxis: {\n          type: 'category',\n          data: this.chartDateData\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: [\n          {\n            data: this.chartData,\n            type: 'bar',\n            showBackground: true,\n            backgroundStyle: {\n              color: 'rgba(180, 180, 180, 0.2)'\n            }\n          }\n        ],\n\t\t\t\ttooltip: {\n\t\t\t\t\ttrigger: 'axis',\n\t\t\t\t\taxisPointer: {\n\t\t\t\t\t\ttype: 'shadow'\n\t\t\t\t\t},\n\t\t\t\t\tformatter: function (params) {\n\t\t\t\t\t\tlet data = params[0]\n\t\t\t\t\t\treturn data.axisValue + '<br/>' + data.data;\n\t\t\t\t\t}\n\t\t\t\t}\n      });\n\t\t\tmyChart.on('click', event => {\n\t\t\t\tconsole.log(event)\n\t\t\t})\n\t\t\tmyChart.on('mouseover', event => {\n\t\t\t\tconst index = event.dataIndex\n\t\t\t\tthis.curData = {\n\t\t\t\t\tdate: getTime(this.historyData[index].timeStamp),\n\t\t\t\t\tresult: (Number(this.historyData[index].result) * 100).toFixed(1) + ' %',\n\t\t\t\t\tBMI: this.historyData[index].BMI,\n\t\t\t\t\tweightGain: this.historyData[index].weightGain,\n\t\t\t\t\tcycle: this.historyData[index].menstrualCycle,\n\t\t\t\t}\n\t\t\t})\n\n\t\t}\n\t},\n\tcomponents: {\n  }\n}\n\n</script>\n\n<style scoped>\n.history-container {\n\tbox-sizing: border-box;\n\tmargin: 40px auto;\n\tpadding: 20px 0;\n\theight: 90%;\n\twidth: 90%;\n\tbackground: #FFF;\n\tborder: 1px solid #EEEEEE;\n\tbox-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n\ttext-align: left;\n}\n\n.chart-container {\n\theight: 100%;\n\tborder-right: 1px #EEE solid;\n}\n\n.info-container {\n\theight: 100%;\n\ttext-align: left;\n}\n\n.info-title {\n\tfont-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;\n\theight: 5%;\n\tfont-weight: 400;\n\tfont-size: 24px;\n\tline-height: 15px;\n\ttext-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n\twidth: 90%;\n\tmargin: 0 auto;\n}\n.info-board {\n\twidth: 90%;\n\theight: 80%;\n\tmargin: 20px auto;\n\t/* border: 1px black solid; */\n\tbox-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n}\n\n.info-item {\n\t/* display: flex; */\n}\n\n.info-value {\n\ttext-align: left;\n\tline-height: 28px;\n}\n.info-key {\n\ttext-align: left;\n\tline-height: 28px;\n}\n\n.summary-divider {\n\twidth: 100%;\n\theight: 2px;\n\tbackground-color: #EEEEEE;\n\tmargin: 10px auto;\n}\n</style>"]},"metadata":{},"sourceType":"module"}